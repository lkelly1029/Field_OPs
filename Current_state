# Current Project State

## 1. Findings (Factual Inventory)

### Control Layer
- **Control File**: `control/sovereign_state_control.yaml` [EXISTS]
- **Documentation**: Onboarding, Build Reference, First Vertical Guide [EXISTS]
- **Alignment**: Control file matches Brief requirements [EXISTS]

### Engine Layer
- **Core Logic**: `Sovereign.Core`, `Sovereign.Economy`, `Sovereign.Sim`, `Sovereign.Mods` projects [EXISTS]
- **Scenarios**: `PowerAcceptance.cs`, `WaterAcceptance.cs`, `IntegrationAcceptance.cs`, `IndustrialAcceptance.cs`, `SerializationAcceptance.cs` [EXISTS]
- **Legacy Artifacts**: Cleaned up. Root-level `.cs` files removed. [RESOLVED]
- **Tests**: `Sovereign.Tests` project updated with `LedgerTests.cs` and `PlotDecayTests.cs`. [UPDATED]
- **Multi-Resource Support**: **IMPLEMENTED**.
- **Water Vertical**: **IMPLEMENTED & VERIFIED**.
- **Deep Integration**: **IMPLEMENTED**.
- **Metrics**: **IMPLEMENTED**.
- **Resource Matrix**: **EXPANDED**.
- **Storage Buffers**: **IMPLEMENTED**.
- **Storage Caps**: **IMPLEMENTED**.
- **Resource Decay**: **IMPLEMENTED**.
- **Steel Vertical**: **IMPLEMENTED**.
- **Iron Vertical**: **IMPLEMENTED**.
- **Refinery Logic**: **IMPLEMENTED & VERIFIED**.
- **Financial Dashboard**: **IMPLEMENTED**.
- **Industrial Chain**: **VERIFIED**.
- **Logistics**: **IMPLEMENTED**.
- **Commands**: **IMPLEMENTED**.
- **Persistence**: **IMPLEMENTED**.
- **Government Modifiers (M4)**: **IMPLEMENTED**.

### Unity Layer
- **Integrations**: `Assets/Scripts/Integrations/Supabase/` contains `Secrets.cs`, `SupabaseManager.cs`, and `ConstructionMaterial.cs`. [CONSOLIDATED]
- **Dev Console UI**: `Assets/Scripts/DevTools/SovereignDevConsoleOverlay.cs` [UPDATED]. Includes Sim/Persistence Controls and **Hover Tooltips**.
- **Sim Bridge Interface**: `Assets/Scripts/SimBridge/ISimDebugProvider.cs` [EXISTS]
- **Sim Bridge Implementation**: `Assets/Scripts/SimBridge/SimulationRunner.cs` [UPDATED].
- **Plot Renderer**: `Assets/Scripts/SimBridge/PlotRenderer.cs` [EXISTS]
- **Player Input**: `Assets/Scripts/SimBridge/PlotClicker.cs` [UPDATED]. Detects hover.
- **Tooltip Manager**: `Assets/Scripts/SimBridge/TooltipManager.cs` [CREATED].
- **Building Manager**: `Assets/Scripts/SimBridge/BuildingManager.cs` [EXISTS]
- **Scene**: `Assets/Scenes/SampleScene.unity` [EXISTS]

### CI / Guardrails
- **Scripts**: `validate_control.py`, `validate_repo_guardrails.py`, `run_guardrails.ps1` [EXISTS]
- **Placement Contract**: Verified. No `.cs` files at repo root. [SUCCESS]

## 2. Next Steps (Prioritized)

1.  **Build Engine DLLs**
    -   **Task**: Build the engine projects (`Sovereign.Sim` etc.) locally.
    -   **Target**: Copy DLLs to `Assets/Plugins/Sovereign/`.
    -   **Goal**: Ensure Unity references the engine via binaries, keeping strict separation.

2.  **Verify SimRunner Bridge**
    -   **Task**: Ensure `SimulationRunner.cs` correctly steps ticks using the referenced DLL logic.
    -   **Goal**: Engine runs "headless" inside Unity.

3.  **Final Polish**
    -   **Task**: Ensure all code paths are robust and documented.
